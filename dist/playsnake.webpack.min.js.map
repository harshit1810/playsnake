{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,8BAA8B,yDAAyD;;;AAGvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;AACA;;AAEA,a","file":"playsnake.webpack.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","const PLAY_SNAKE = (config = { 'arenaHeight': 500, 'arenaWidth': 500, 'snakeSpeed': 5 }) => {\r\n\r\n\r\n\tif (!window) {\r\n\t\treturn;\r\n\t}\r\n\tconst ERROR_MESSAGES = {\r\n\t\t'default': 'Sorry.',\r\n\t\t'startGame': 'Sorry. Unable To Start The Game'\r\n\t};\r\n\tconst WINDOW = window;\r\n\tconst DOCUMENT = WINDOW.document;\r\n\tconst DOCUMENT_BODY = DOCUMENT.body;\r\n\tconst [SVG_XML_NS, RENDER_UNIT] = ['http://www.w3.org/2000/svg', 'px'];\r\n\tconst pixelify = (function (number) {\r\n\t\treturn String(number).trim().concat(this);\r\n\t}).bind(RENDER_UNIT);\r\n\tconst CONFIG_ARENA = {\r\n\t\t'id': 'play-snake-arena',\r\n\t\t'width': config.arenaWidth,\r\n\t\t'height': config.arenaHeight,\r\n\t\t'borderColor': 'black',\r\n\t\t'borderWidth': 1,\r\n\t\t'limits': {\r\n\t\t\t'x': config.arenaWidth - 1,\r\n\t\t\t'y': config.arenaHeight - 1\r\n\t\t},\r\n\t\t'supportedKeys': [37, 38, 39, 40],\r\n\t\t'keyConfig': {\r\n\t\t\t'37': {\r\n\t\t\t\t'reverse': 39\r\n\t\t\t},\r\n\t\t\t'38': {\r\n\t\t\t\t'reverse': 40\r\n\t\t\t},\r\n\t\t\t'39': {\r\n\t\t\t\t'reverse': 37\r\n\t\t\t},\r\n\t\t\t'40': {\r\n\t\t\t\t'reverse': 38\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\tconst SNAKE_ARENA = (function () {\r\n\t\ttry {\r\n\t\t\tlet canvas = document.createElementNS(SVG_XML_NS, 'svg');\r\n\t\t\tcanvas.setAttribute('id', CONFIG_ARENA.id);\r\n\t\t\tcanvas.setAttribute('height', CONFIG_ARENA.height);\r\n\t\t\tcanvas.setAttribute('width', CONFIG_ARENA.width);\r\n\t\t\tcanvas.style.border = pixelify(CONFIG_ARENA.borderWidth) + ' solid ' + CONFIG_ARENA.borderColor;\r\n\t\t\tDOCUMENT_BODY.appendChild(canvas);\r\n\t\t\treturn canvas;\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})();\r\n\r\n\tif (!SNAKE_ARENA) {\r\n\t\treturn showAlert('Sorry. Unable to start the game.');\r\n\t}\r\n\r\n\r\n\tclass Subject {\r\n\t\tconstructor(topic, observers = []) {\r\n\t\t\tthis.observers = observers;\r\n\t\t\tthis.topic = topic;\r\n\t\t}\r\n\t\taddObserver(obsrv) {\r\n\t\t\tif (obsrv.element && typeof obsrv.element.id !== 'undefined') {\r\n\t\t\t\tthis.observers.push(obsrv);\r\n\t\t\t}\r\n\t\t\tconsole.log(this.observers);\r\n\t\t}\r\n\t\tremoveObserver(obsrv) {\r\n\t\t\tthis.observers.splice(this.observers.findIndex(obj => obj.element.id === obsrv.element.id), 1);\r\n\t\t}\r\n\t\tnotify() {\r\n\t\t\tthis.observers.forEach(obsrv => {\r\n\t\t\t\tobsrv[this.topic]();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tclass XYUpdater extends Subject {\r\n\t\tconstructor() {\r\n\t\t\tsuper('nextXY');\r\n\t\t}\r\n\t}\r\n\tconst SNAKE_PART_POSITION_UPDATER = new XYUpdater();\r\n\r\n\tconst LOGGER = {\r\n\t\tlog: console.log\r\n\t};\r\n\tlet INTERVAL_ID;\r\n\tlet SNAKE_FOOD_BONUS_INTERVAL_ID;\r\n\tfunction isXOverArenaLimits(value) {\r\n\t\treturn value <= CONFIG_ARENA.limits.x ? false : true;\r\n\t}\r\n\tfunction isYOverArenaLimits(value) {\r\n\t\treturn value <= CONFIG_ARENA.limits.y ? false : true;\r\n\t}\r\n\tfunction isUnderArenaLimits(value) {\r\n\t\treturn value < CONFIG_ARENA.borderWidth ? true : false;\r\n\t}\r\n\tfunction showAlert(message = ERROR_MESSAGES.default) {\r\n\t\treturn WINDOW.alert(String(message).trim());\r\n\t}\r\n\r\n\t/**\r\n\t * configurations\r\n\t */\r\n\tconst CONFIG = (function (arg) {\r\n\t\treturn {\r\n\t\t\t'SNAKE': {\r\n\t\t\t\t'id': arg.snakeId,\r\n\t\t\t\t'elemType': 'rect',\r\n\t\t\t\t'width': arg.snakeSize,\r\n\t\t\t\t'color': arg.primaryColor,\r\n\t\t\t\t'partGap': 0,\r\n\t\t\t\t'length': arg.snakeLength,\r\n\t\t\t\t'speed': 1000 - (config.snakeSpeed * 100),\r\n\t\t\t\t'directionMap': {\r\n\t\t\t\t\t'37': 'LEFT',\r\n\t\t\t\t\t'38': 'UP',\r\n\t\t\t\t\t'39': 'RIGHT',\r\n\t\t\t\t\t'40': 'DOWN'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'SNAKE_PART': {\r\n\t\t\t\t'idPrefix': arg.snakeId + '-part'\r\n\t\t\t},\r\n\t\t\t'SNAKE_FOOD': {\r\n\t\t\t\t'id': arg.snakeFoodId,\r\n\t\t\t\t'elemType': 'circle',\r\n\t\t\t\t'color': arg.secondaryColor,\r\n\t\t\t\t'size': Math.floor(arg.snakeSize / 3),\r\n\t\t\t\t'startAfter': 2\r\n\t\t\t},\r\n\t\t\t'SNAKE_FOOD_BONUS': {\r\n\t\t\t\t'color': arg.alertColor,\r\n\t\t\t\t'size': pixelify(arg.snakeSize * 2)\r\n\t\t\t},\r\n\t\t\t'ARENA': {\r\n\t\t\t\t'center': {\r\n\t\t\t\t\t'x': Math.floor(Math.floor(SNAKE_ARENA.getAttribute('width')) / 2),\r\n\t\t\t\t\t'y': Math.floor(Math.floor(SNAKE_ARENA.getAttribute('height')) / 2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t})({\r\n\t\t'snakeId': 'the-snake',\r\n\t\t'snakeFoodId': 'the-snake-food',\r\n\t\t'primaryColor': 'black',\r\n\t\t'secondaryColor': 'grey',\r\n\t\t'alertColor': 'red',\r\n\t\t'snakeLength': 1,\r\n\t\t'snakeSize': 15\r\n\t});\r\n\tlet SNAKE_DIRECTION = 39;\r\n\tfunction startGame() {\r\n\t\tfunction onError() {\r\n\t\t\tstopTheSnake();\r\n\t\t\tstopTheSnakeFood();\r\n\t\t\tshowAlert(ERROR_MESSAGES.startGame);\r\n\t\t}\r\n\t\tSNAKE.get().then(\r\n\t\t\tsnake => {\r\n\t\t\t\tSNAKE = snake;\r\n\t\t\t\treturn SNAKE_FOOD.get();\r\n\t\t\t}, error => Promise.reject(error)\r\n\t\t).then(\r\n\t\t\tsnakeFood => {\r\n\t\t\t\tSNAKE_FOOD = snakeFood;\r\n\t\t\t\treturn prepareGameEnd();\r\n\t\t\t}, error => Promise.reject(error)\r\n\t\t).then(\r\n\t\t\tgameEndProcessed => {\r\n\t\t\t\tstartTheSnake();\r\n\t\t\t},\r\n\t\t\terror => {\r\n\t\t\t\tonError();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\tfunction prepareGameEnd() {\r\n\t\treturn new Promise(function (resolve, reject) {\r\n\t\t\ttry {\r\n\t\t\t\tWINDOW.addEventListener('unload', () => {\r\n\t\t\t\t\tstopTheSnake();\r\n\t\t\t\t\tstopTheSnakeFood();\r\n\t\t\t\t});\r\n\t\t\t\taddButtonListeners();\r\n\t\t\t\tresolve(true);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treject(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction startTheSnake() {\r\n\t\tINTERVAL_ID = setInterval(() => {\r\n\t\t\tmoveTheSnake();\r\n\t\t}, CONFIG.SNAKE.speed);\r\n\t}\r\n\tfunction moveTheSnake() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tSNAKE.start();\r\n\t\t}, 0);\r\n\t}\r\n\tfunction stopTheSnake() {\r\n\t\tSNAKE = null;\r\n\t\tWINDOW.clearInterval(INTERVAL_ID);\r\n\t}\r\n\tfunction stopTheSnakeFood() {\r\n\t\tSNAKE_FOOD = null;\r\n\t}\r\n\tfunction addButtonListeners() {\r\n\t\tDOCUMENT.addEventListener('keydown', function (event) {\r\n\t\t\tif (CONFIG_ARENA.supportedKeys.includes(event.keyCode)\r\n\t\t\t\t&& SNAKE_DIRECTION !== event.keyCode\r\n\t\t\t\t&& event.keyCode !== CONFIG_ARENA.keyConfig[String(SNAKE_DIRECTION)].reverse) {\r\n\t\t\t\tSNAKE_DIRECTION = event.keyCode;\r\n\t\t\t\tSNAKE.changeDirection(SNAKE_DIRECTION);\r\n\t\t\t\t//SNAKE[CONFIG.SNAKE.directionMap[String(SNAKE_DIRECTION)]]();\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\t/**\r\n\t * Snake\r\n\t */\r\n\tclass Snake {\r\n\t\tconstructor(arena, startX, startY, color = CONFIG.SNAKE.color) {\r\n\t\t\tthis.direction = SNAKE_DIRECTION;\r\n\t\t\tthis.head = new SnakePart(arena, startX, startY, SNAKE_DIRECTION, color);\r\n\t\t\tthis.tail = this.head;\r\n\t\t\tthis.arena = arena;\r\n\t\t\tthis.UP = function () {\r\n\t\t\t\tthis.move(0, CONFIG.SNAKE.width * -1);\r\n\t\t\t};\r\n\t\t\tthis.DOWN = function () {\r\n\t\t\t\tthis.move(0, CONFIG.SNAKE.width);\r\n\t\t\t};\r\n\t\t\tthis.RIGHT = function () {\r\n\t\t\t\tthis.move(CONFIG.SNAKE.width, 0);\r\n\t\t\t};\r\n\t\t\tthis.LEFT = function () {\r\n\t\t\t\tthis.move(CONFIG.SNAKE.width * - 1, 0);\r\n\t\t\t};\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\tlet _part = this.head;\r\n\t\t\tlet count = (_part !== null) ? 1 : 0;\r\n\t\t\twhile (_part.next !== null) {\r\n\t\t\t\t_part = _part.next;\r\n\t\t\t\tcount += 1;\r\n\t\t\t}\r\n\t\t\treturn count;\r\n\t\t}\r\n\t\tchangeDirection(directionCode) {\r\n\t\t\tthis.direction = directionCode;\r\n\t\t\tthis.head.direction = directionCode;\r\n\t\t}\r\n\t\tgrow() {\r\n\t\t\tlet { x, y } = this.tail.getXYOfNextPart();\r\n\t\t\tlet newPart = new SnakePart(SNAKE.arena, x, y, this.tail.direction, this.tail.color);\r\n\t\t\tthis.tail.next = newPart;\r\n\t\t\tnewPart.prev = this.tail;\r\n\t\t\tthis.tail = newPart;\r\n\t\t\tSNAKE_PART_POSITION_UPDATER.addObserver(this.tail);\r\n\t\t\treturn this.tail;\r\n\t\t}\r\n\t\tchangeColor(colour) {\r\n\t\t\tlet _part = this.head;\r\n\t\t\twhile (_part.next !== null) {\r\n\t\t\t\tchange(_part, colour);\r\n\t\t\t\t_part = _part.next;\r\n\t\t\t}\r\n\r\n\t\t\tfunction change(_part, clr) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t_part.color = clr;\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tstart() {\r\n\t\t\tthis[CONFIG.SNAKE.directionMap[String(SNAKE_DIRECTION)]]();\r\n\t\t}\r\n\t\tisEatingFood() {\r\n\t\t\tlet head = this.head;\r\n\t\t\tif (head.x < SNAKE_FOOD.x && SNAKE_FOOD.x < head.x2 && head.y < SNAKE_FOOD.y && SNAKE_FOOD.y < head.y2) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tmove(xvalue, yvalue) {\r\n\t\t\tlet _part = this.head;\r\n\t\t\tlet [_part_x_pos, _part_y_pos] = [_part.x, _part.y];\r\n\t\t\tlet [nextX, nextY] = [_part_x_pos + xvalue, _part_y_pos + yvalue];\r\n\r\n\t\t\tif (isXOverArenaLimits(nextX)) {\r\n\t\t\t\tnextX = CONFIG_ARENA.borderWidth;\r\n\t\t\t}\r\n\t\t\tif (isYOverArenaLimits(nextY)) {\r\n\t\t\t\tnextY = CONFIG_ARENA.borderWidth;\r\n\t\t\t}\r\n\t\t\tif (isUnderArenaLimits(nextX)) {\r\n\t\t\t\tnextX = CONFIG_ARENA.limits.x;\r\n\t\t\t}\r\n\t\t\tif (isUnderArenaLimits(nextY)) {\r\n\t\t\t\tnextY = CONFIG_ARENA.limits.y;\r\n\t\t\t}\r\n\t\t\t_part.x = nextX;\r\n\t\t\t_part.y = nextY;\r\n\r\n\t\t\tif (this.isEatingFood()) {\r\n\t\t\t\tthis.grow();\r\n\t\t\t\tSNAKE_FOOD.drop();\r\n\t\t\t}\r\n\t\t\tSNAKE_PART_POSITION_UPDATER.notify();\r\n\t\t}\r\n\t}\r\n\tclass SnakePart {\r\n\t\tconstructor(arena, x, y, dirx, color) {\r\n\t\t\tlet snakeLen = SNAKE.length;\r\n\t\t\tthis.id = (typeof snakeLen !== 'undefined' ? CONFIG.SNAKE.id + '-part' + (SNAKE.length + 1) : CONFIG.SNAKE.id);\r\n\t\t\tthis.direction = SNAKE_DIRECTION;\r\n\t\t\tthis.element = (() => {\r\n\t\t\t\tlet _elem = DOCUMENT.createElementNS(SVG_XML_NS, CONFIG.SNAKE.elemType);\r\n\t\t\t\t_elem.setAttribute('id', this.id);\r\n\t\t\t\t_elem.setAttribute('x', x);\r\n\t\t\t\t_elem.setAttribute('y', y);\r\n\t\t\t\t_elem.setAttribute('fill', color);\r\n\t\t\t\t_elem.setAttribute('width', pixelify(CONFIG.SNAKE.width));\r\n\t\t\t\t_elem.setAttribute('height', pixelify(CONFIG.SNAKE.width));\r\n\t\t\t\tarena.appendChild(_elem);\r\n\t\t\t\treturn _elem;\r\n\t\t\t})();\r\n\t\t\tthis.color = color;\r\n\t\t\tthis.next = null;\r\n\t\t\tthis.prev = null;\r\n\t\t\tthis.nextPosition = {};\r\n\t\t}\r\n\t\tisSnakeHead() {\r\n\t\t\treturn this.id === CONFIG.SNAKE.id;\r\n\t\t}\r\n\t\tget x() {\r\n\t\t\treturn parseInt(this.element.getAttribute('x'));\r\n\t\t}\r\n\t\tset x(value) {\r\n\t\t\tthis.element.setAttribute('x', Math.floor(value));\r\n\t\t}\r\n\t\tget y() {\r\n\t\t\treturn parseInt(this.element.getAttribute('y'));\r\n\t\t}\r\n\t\tset y(value) {\r\n\t\t\tthis.element.setAttribute('y', Math.floor(value));\r\n\t\t}\r\n\t\tget x2() {\r\n\t\t\treturn this.x + (CONFIG.SNAKE.width - 1);\r\n\t\t}\r\n\t\tget y2() {\r\n\t\t\treturn this.y + (CONFIG.SNAKE.width - 1);\r\n\t\t}\r\n\t\tnextXY() {\r\n\t\t\tlet nextPosition = {};\r\n\t\t\tif (this.direction === this.prev.direction) {\r\n\t\t\t\tnextPosition = this.prev.getXYOfNextPart();\r\n\t\t\t} else {\r\n\t\t\t\tnextPosition = {\r\n\t\t\t\t\tx: this.x, y: this.y\r\n\t\t\t\t}\r\n\t\t\t\tswitch (this.prev.direction) {\r\n\t\t\t\t\tcase 37:\r\n\t\t\t\t\t\tnextPosition.y = this.prev.y;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 38:\r\n\t\t\t\t\t\tnextPosition.x = this.prev.x;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 39:\r\n\t\t\t\t\t\tnextPosition.y = this.prev.y;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 40:\r\n\t\t\t\t\t\tnextPosition.x = this.prev.x;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.x = nextPosition.x;\r\n\t\t\tthis.y = nextPosition.y;\r\n\t\t\tthis.direction = this.prev.direction;\r\n\t\t}\r\n\t\tgetXYOfNextPart() {\r\n\t\t\tlet [_x, _y] = [this.x, this.y];\r\n\t\t\tswitch (this.direction) {\r\n\t\t\t\tcase 37:\r\n\t\t\t\t\t_x = this.x2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38:\r\n\t\t\t\t\t_y = this.y2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 39:\r\n\t\t\t\t\t_x = this.x - (this.x2 - this.x);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 40:\r\n\t\t\t\t\t_y = this.y - (this.y2 - this.y);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn { x: _x, y: _y };\r\n\t\t}\r\n\t}\r\n\tclass SnakeFood {\r\n\t\tconstructor(arena, x, y, color = CONFIG.SNAKE_FOOD.color, size = CONFIG.SNAKE_FOOD.size) {\r\n\t\t\tif (!(SNAKE_FOOD instanceof SnakeFood)) {\r\n\t\t\t\tthis.element = (() => {\r\n\t\t\t\t\tlet _e = DOCUMENT.createElementNS(SVG_XML_NS, CONFIG.SNAKE_FOOD.elemType);\r\n\t\t\t\t\t_e.setAttribute('cx', x);\r\n\t\t\t\t\t_e.setAttribute('cy', y);\r\n\t\t\t\t\t_e.setAttribute('r', size);\r\n\t\t\t\t\t_e.setAttribute('fill', color);\r\n\t\t\t\t\tarena.appendChild(_e);\r\n\t\t\t\t\treturn _e;\r\n\t\t\t\t})();\r\n\t\t\t\tthis.arena = arena;\r\n\t\t\t\t[this.x2, this.y2] = [x + (CONFIG.SNAKE_FOOD.size - 1), y + (CONFIG.SNAKE_FOOD.size - 1)];\r\n\t\t\t}\r\n\t\t}\r\n\t\tget x() {\r\n\t\t\treturn parseInt(this.element.getAttribute('cx'));\r\n\t\t}\r\n\t\tset x(value) {\r\n\t\t\tthis.element.setAttribute('cx', Math.floor(value));\r\n\t\t}\r\n\t\tget y() {\r\n\t\t\treturn parseInt(this.element.getAttribute('cy'));\r\n\t\t}\r\n\t\tset y(value) {\r\n\t\t\tthis.element.setAttribute('cy', Math.floor(value));\r\n\t\t}\r\n\t\tstatic getNextFoodPosition() {\r\n\t\t\tlet [multipleOf, _x, _y] = [CONFIG.SNAKE.width, getRandomX(), getRandomY()];\r\n\t\t\twhile (_x % multipleOf !== 0 || _y % multipleOf !== 0) {\r\n\t\t\t\t[_x, _y] = [getRandomX(), getRandomY()];\r\n\t\t\t}\r\n\t\t\tfunction getRandomX() {\r\n\t\t\t\treturn Math.floor(Math.random() * (CONFIG_ARENA.limits.x - CONFIG.SNAKE_FOOD.size)) + CONFIG_ARENA.borderWidth + 1;\r\n\t\t\t}\r\n\t\t\tfunction getRandomY() {\r\n\t\t\t\treturn Math.floor(Math.random() * (CONFIG_ARENA.limits.y - CONFIG.SNAKE_FOOD.size)) + CONFIG_ARENA.borderWidth + 1;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tx: _x, y: _y\r\n\t\t\t};\r\n\t\t}\r\n\t\tdrop() {\r\n\t\t\tif (!(SNAKE_FOOD instanceof SnakeFood)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet newPosition = SnakeFood.getNextFoodPosition();\r\n\t\t\tSNAKE_FOOD.x = newPosition.x;\r\n\t\t\tSNAKE_FOOD.y = newPosition.y;\r\n\t\t}\r\n\t}\r\n\tclass SnakeFoodBonus {\r\n\t\tconstructor(x, y, color = CONFIG.SNAKE_FOOD_BONUS.color, size = CONFIG.SNAKE_FOOD_BONUS.size) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.fill = color;\r\n\t\t\tthis.radius = size;\r\n\t\t}\r\n\t}\r\n\tlet SNAKE = (function () {\r\n\t\tlet theSnake;\r\n\t\tfunction initSnake() {\r\n\t\t\tlet _snake = new Snake(\r\n\t\t\t\tSNAKE_ARENA,\r\n\t\t\t\tCONFIG.ARENA.center.x,\r\n\t\t\t\tCONFIG.ARENA.center.y,\r\n\t\t\t\tCONFIG.SNAKE.color\r\n\t\t\t);\r\n\t\t\treturn _snake;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tget: () => new Promise(function (resolve, reject) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (theSnake instanceof Snake) {\r\n\t\t\t\t\t\treturn resolve(theSnake);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttheSnake = initSnake();\r\n\t\t\t\t\tLOGGER.log('snake created');\r\n\t\t\t\t\tresolve(theSnake);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t})();\r\n\tlet SNAKE_FOOD = (function () {\r\n\t\tlet theFood;\r\n\t\tfunction initSnakeFood() {\r\n\t\t\tlet foodPosition = SnakeFood.getNextFoodPosition();\r\n\t\t\tlet _food = new SnakeFood(\r\n\t\t\t\tSNAKE.arena,\r\n\t\t\t\tfoodPosition.x,\r\n\t\t\t\tfoodPosition.y,\r\n\t\t\t\tCONFIG.SNAKE_FOOD.color,\r\n\t\t\t\tCONFIG.SNAKE_FOOD.size\r\n\t\t\t);\r\n\t\t\treturn _food;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tget: () => new Promise(function (resolve, reject) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (theFood instanceof SnakeFood) {\r\n\t\t\t\t\t\treturn resolve(theFood);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttheFood = initSnakeFood();\r\n\t\t\t\t\tLOGGER.log('snake food created');\r\n\t\t\t\t\tsetTimeout(resolve, CONFIG.SNAKE_FOOD.startAfter * 1000, theFood);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t};\r\n\t})();\r\n\tstartGame();\r\n};\r\n\r\nPLAY_SNAKE();"],"sourceRoot":""}