(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(){return{setupGame:function(t){var n,r,i,o={FlexCols:{display:"flex","flex-direction":"row"},CapitalizeText:{"text-transform":"capitalize"},ZeroPixels:t.pixelify(0),Padding:t.pixelify(5)},a=t.getDocument().getElementById.bind(t.getDocument()),s=t.getConfig(),u=s.id,c=s.arenaContainerId,d=s.directionMap,l=s.pauseButton,g=s.resumeButton,f=s.quitButton,p=s.game,h=p.scoreBoard,y=p.infoContainerId,m=p.legendContainerId,v=s.eatables,b=void 0===v?{}:v,E=Object.keys(d).reduce((function(e,t){return e[d[t]]=t,e}),{UP:null,DOWN:null,RIGHT:null,LEFT:null}),k=a(u),S=(n=l.id,(r=a(n)).addEventListener("click",(function(){t.getGameEvents().emit("PAUSE_BUTTON_CLICKED")})),r),x=function(e){var n=a(e);return n.addEventListener("click",(function(){t.getGameEvents().emit("RESUME_BUTTON_CLICKED")})),n}(g.id);!function(e){a(e).addEventListener("click",(function(){t.getGameEvents().emit("STOP_GAME")}))}(f.id),i=a(m),Object.keys(b).forEach((function(e){var n=b[e],r=n.description,a=n.showInLegend,s=n.color,u=void 0===s?"white":s;if(a&&r){var c=t.createHTMLElement({parent:i,elementType:"div",attributes:{class:"cols universal-padding",style:t.getStyleString(Object.assign({},{"align-items":"center"}))}});t.createHTMLElement({parent:c,elementType:"div",attributes:{style:t.getStyleString({height:t.pixelify(10),width:t.pixelify(10),"background-color":u,"border-radius":t.pixelify(5)})}}),t.createHTMLElement({parent:c,elementType:"span",innerHTML:r,attributes:{style:t.getStyleString(Object.assign({},o.CapitalizeText,{padding:"".concat(o.ZeroPixels," ").concat(t.pixelify(2))}))}})}})),I={},T=!1,C=function(e){e&&e.preventDefault(),I={},T=!1},(A=a(c)).addEventListener("touchstart",(function(e){e.preventDefault(),e.touches&&e.touches.length>1||e.targetTouches&&e.targetTouches.length>0&&(I.x=parseInt(e.targetTouches[0].clientX),I.y=parseInt(e.targetTouches[0].clientY))}),!0),A.addEventListener("touchmove",(function(e){if(e.preventDefault(),!T){var n=I,r=n.x,i=n.y;I={};var o=e.changedTouches[0],a=o.clientX,s=o.clientY,u=[parseInt(a),parseInt(s)],c=u[0],d=u[1],l=c-r,g=d-i;if((r!==c||i!==d)&&Math.abs(l)!==Math.abs(g)){var f=function(e){t.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:e}),T=!0};return 0===l?f(g>0?E.DOWN:E.UP):0===g?f(l>0?E.RIGHT:E.LEFT):l>0&&Math.abs(l)>Math.abs(g)?f(E.RIGHT):l<0&&Math.abs(l)>Math.abs(g)?f(E.LEFT):g>0&&Math.abs(g)>Math.abs(l)?f(E.DOWN):g<0&&Math.abs(g)>Math.abs(l)?f(E.UP):void 0}}}),!0),A.addEventListener("touchend",C,!0),A.addEventListener("touchcancel",C,!0);var I,T,C,A,w,B,D,O,M,L,N,G,_,F,H=a(h.id),P=(_=["modal-container","modal-content-btn-1","modal-content-btn-2","modal-content","modal-content-btns-container"].map(a),F=5,w=function(e){if(Array.isArray(e))return e}(_)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(_,F)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(_,F)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),B=w[0],D=w[1],O=w[2],M=w[3],L=w[4],N=[],{show:function(e){var n=e.elementIds,r=void 0===n?[]:n,i=e.texts,o=void 0===i?[]:i,s=e.btn1,u=e.btn2;s=s||{},u=u||{},r=Array.isArray(r)?r:[r],o=Array.isArray(o)?o:[o],r.forEach((function(e){if(e){var t=a(e).cloneNode(!0);N.push(t),M.insertBefore(t,L)}})),o.forEach((function(e){return N.push(t.createHTMLElement({elementType:"p",parent:M,innerHTML:e,beforeElement:L,attributes:{class:"text-center"}}))})),D.innerHTML=s.label?s.label:D.innerHTML,O.innerHTML=u.label?u.label:O.innerHTML,D.style.display="boolean"==typeof s.show?s.show?"block":"none":D.style.display,O.style.display="boolean"==typeof u.show?u.show?"block":"none":O.style.display,"function"==typeof s.clickHandler&&D.addEventListener("click",s.clickHandler,{once:!0}),"function"==typeof u.clickHandler&&O.addEventListener("click",u.clickHandler,{once:!0}),D.addEventListener("click",G,{once:!0}),O.addEventListener("click",G,{once:!0}),B.style.display="block"},hide:G=function(){B.style.display="none",N.forEach((function(e){return e.remove()})),D.innerHTML="no",O.innerHTML="yes",D.style.display="block",O.style.display="block"}});return a(y).addEventListener("click",(function(){return t.getGameEvents().emit("SHOW_GAME_INFO")})),{SNAKE_ARENA:k,PLAY_BUTTON:x,PAUSE_BUTTON:S,SCORE_BOARD:H,MODAL:P}},onWindowLoad:function(e){var t=e.arenaId,n=e.arenaContainerId,r=function(e){return Math.floor(String(e).trim().split("px")[0])},i=document.getElementById(n),o=document.getElementById(t),a=r(window.getComputedStyle(i).maxWidth),s=r(window.getComputedStyle(i).width),u=s>a?a:s,c=u;return o.setAttribute("width",u),o.setAttribute("height",c),{ARENA_WIDTH:u,ARENA_HEIGHT:c}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){var r=function(e){var t=e.getConfig(),n=t.snake.width;function r(e,r){var i,o;do{var a=[Math.floor(Math.random()*(e.x-r))+t.borderWidth+1,Math.floor(Math.random()*(e.y-r))+t.borderWidth+1];i=a[0],o=a[1]}while(i%n!=0&&o%n!=0);return{x:i+2,y:o+2}}return{getNextEatablePosition:r,createEatableItem:function(n,i,o,a){if(!t.eatables[a])return e.LOGGER.warn("item ".concat(a," is not configured"));var s,u=t.eatables[a],c=u.id,d=u.limits,l=u.elemType,g=u.color,f=u.size,p=u.isIntervalBased,h=u.startAfter,y=u.points,m=u.appearDuration,v=u.growSnakeIfConsumed,b=u.growSnakeByLength,E=e.createHTMLElement({elementType:l,elementNamespace:e.getSvgNamespace(),attributes:{id:c,cx:i,cy:o,r:f,fill:g},parent:e.getGame().arena,beforeElement:e.getGame().getSnake().head.element}),k=f;return{radius:k,get isIntervalBased(){return p},get element(){return E},get arena(){return n},get limits(){return d},get intervalId(){return s},set intervalId(e){s=e},get startAfter(){return h},get size(){return f},get x(){return this.getCenter().x-(k-1)},get y(){return this.getCenter().y-(k-1)},get x2(){return this.getCenter().x+(k-1)},get y2(){return this.getCenter().y+(k-1)},get points(){return parseInt(y)},get appearDuration(){return m},get growSnakeIfConsumed(){return v},get growSnakeByLength(){return b},getCenter:function(){return{x:parseInt(this.element.getAttribute("cx")),y:parseInt(this.element.getAttribute("cy"))}},setCenter:function(e){var t=e.x,n=e.y;this.element.setAttribute("cx",t),this.element.setAttribute("cy",n)},startInterval:function(){var e=this;if(e.isIntervalBased)return e.intervalId=setInterval(e.drop.bind(e),1e3*e.startAfter),e.intervalId},drop:function(){var e=this,t=r(e.limits,e.size),n=t.x,i=t.y;e.setCenter({x:n,y:i}),"number"==typeof e.appearDuration&&setTimeout(e.hide.bind(e),1e3*e.appearDuration)},hide:function(){this.setCenter({x:-10,y:-10})}}}}}(e),i=r.createEatableItem,o=r.getNextEatablePosition,a=function(e){var t=e.getConfig(),r=t.snake,i=r.elemType,o=r.color,a=r.width,s=r.step,u=r.id;function c(t,n,r,c,d){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o,g=1===d,f="".concat(u,"-part").concat(d),p=a/2,h=n+(p-1),y=r+(p-1),m=e.createHTMLElement({elementNamespace:e.getSvgNamespace(),elementType:i,attributes:{id:f,cx:h,cy:y,r:p,fill:l},parent:t}),v=c,b=null,E=null;return{id:f,element:m,color:l,radius:p,get direction(){return v},set direction(e){v=e},get next(){return b},get prev(){return E},set next(e){b=e},set prev(e){E=e},get x(){return this.getCenter().x-(p-1)},set x(e){m.setAttribute("cx",e+(p-1))},get y(){return this.getCenter().y-(p-1)},set y(e){m.setAttribute("cy",e+(p-1))},get x2(){return this.getCenter().x+(p-1)},get y2(){return this.getCenter().y+(p-1)},get isHead(){return g},isTail:function(){return f===e.getGame().getSnake().tail.id},getCenter:function(){return{x:parseInt(this.element.getAttribute("cx")),y:parseInt(this.element.getAttribute("cy"))}},nextXY:function(){var t=this,n={x:t.x,y:t.y};switch(t.direction){case 37:n.x-=s;break;case 38:n.y-=s;break;case 39:n.x+=s;break;case 40:n.y+=s}e.checkBoundaryPosition(t.direction,n),t.x=n.x,t.y=n.y;var r=e.getDirectionCommands();if(r.hasCommands()){var i=r.getNextTurn(f),o=t.getCenter();i&&i.position.x==o.x&&i.position.y==o.y&&(t.direction=i.direction,e.getSnakeDirectionMap()[f]=i.id,t.isTail()&&r.remove())}}}}return{Snake:function(r,i,u,d,l){var g,f=1,p=o,h=d,y=c(r,i,u,h,f),m=y,v=[y];return{get arena(){return r},set arena(e){r=e},get length(){return f},set length(e){return f=e},get head(){return y},set head(e){return y=e},get tail(){return m},set tail(e){return m=e,this.length+=1,m},get intervalId(){return g},set intervalId(e){g=e},get currentDirection(){return h},set currentDirection(e){h=e},get speed(){return l},set speed(e){l=e},get color(){return p},set color(e){p=e},get bodyParts(){return v},startSnake:function(e){var t=this;return e="number"==typeof e?e:this.speed,t.intervalId=setInterval((function(){t.changeDirection(t.currentDirection),t.start()}),e),t.intervalId},changeDirection:function(e){this.head.direction="number"==typeof e?e:this.currentDirection},start:function(){switch(t.directionMap[this.head.direction]){case"UP":this.move(0,-1*s);break;case"DOWN":this.move(0,s);break;case"RIGHT":this.move(s,0);break;case"LEFT":this.move(-1*s,0)}},getPositionOfNewPart:function(){var e=this.tail,t=e.x,n=e.y,r=e.direction,i=[Number(t),Number(n)],o=i[0],s=i[1];switch(r){case 37:o=t+a;break;case 38:s=n+a;break;case 39:o=t-a;break;case 40:s=n-a}return{x:o,y:s}},grow:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this,r=1;r<=t;r++){var i=n.getPositionOfNewPart(),o=i.x,a=i.y;n.bodyParts.push(c(n.arena,o,a,n.tail.direction,n.length+1));var s=n.bodyParts[n.bodyParts.length-1];n.tail.next=s,s.prev=n.tail,n.tail=s}e.getGame().getBasicFood().drop()},changeColor:function(e){for(var t=this.head;null!==t.next;)n(t,e),t=t.next;function n(e,t){setTimeout((function(){e.color=t}),0)}},isEatingEatable:function(t){return e.intersectingOnXAxis({x1:this.head.x,x2:this.head.x2},{x1:t.x,x2:t.x2})&&e.intersectingOnYAxis({y1:this.head.y,y2:this.head.y2},{y1:t.y,y2:t.y2})},move:function(t,r){if(this.isDevouringSelf())e.getGameEvents().emit("DEVOURED_SELF");else{var i=this.head,o=e.checkBoundaryPosition(i.direction,{x:i.x+t,y:i.y+r}),a=o.x,s=o.y;i.x=a,i.y=s;var u=(g=[e.getGame().getBasicFood(),e.getGame().getSnakeBonusFood(),e.getGame().getSpeedBonusFood()].map(this.isEatingEatable.bind(this)),f=3,function(e){if(Array.isArray(e))return e}(g)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(g,f)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(g,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],d=u[1],l=u[2];this.moveAllParts(),c?e.getGameEvents().emit("EATABLE_CONSUMED",e.getGame().getBasicFood()):l?(e.getGameEvents().emit("EATABLE_CONSUMED",e.getGame().getSpeedBonusFood()),e.getGameEvents().emit("USE_SPEED_BONUS",e.getGame().getSpeedBonusFood())):d&&e.getGameEvents().emit("EATABLE_CONSUMED",e.getGame().getSnakeBonusFood())}var g,f},moveAllParts:function(){1===this.length&&e.getDirectionCommands().clear();for(var t=this.bodyParts,n=0;n<t.length;n++)t[n].isHead||t[n].nextXY()},isDevouringSelf:function(){var e=!1;if(this.length<=2)return e;for(var t=this.head.next.next,n=this.head.getCenter(),r=n.x,i=n.y;null!==t&&!e;){var o=t.getCenter(),a=o.x,s=o.y,u=a-(t.radius-1),c=a+(t.radius-1),d=s-(t.radius-1),l=s+(t.radius-1);e=u<=r&&r<=c&&d<=i&&i<=l,t=t.next}return e}}}}}(e).Snake,s=e.getConfig(),u=t().setupGame,c=e.getDisplayMessages();return{PlaySnake:function(){var t,n,r,d,l;try{var g=u(e);t=g.SNAKE_ARENA,n=g.PLAY_BUTTON,r=g.PAUSE_BUTTON,d=g.SCORE_BOARD,l=g.MODAL}catch(e){throw new Error(c.SETUP_GAME)}var f,p,h,y,m,v,b=s.game.state.playing,E={playButton:n,pauseButton:r,scoreBoard:d};return{get snake(){return f},set snake(e){f=e},get snakeFood(){return p},set snakeFood(e){p=e},get snakeBonusFood(){return h},set snakeBonusFood(e){h=e},get speedBonus(){return y},set speedBonus(e){y=e},get snakeDirection(){return m},set snakeDirection(e){m=e},get arena(){return t},get state(){return b},set state(e){b=e},getSnake:function(){var t=this;if(t.snake)return t.snake;var n=e.getDirectionCommands().getFirst(),r=n.direction,i=n.position,o=i.x,u=i.y;return t.snakeDirection=r,t.snake=a(t.arena,o,u,t.snakeDirection,s.snake.speed),t.snake},getSpeedBonusFood:function(){var e=this;return e.speedBonus||(e.speedBonus=i(e.arena,-10,-10,s.eatables.speedBonus.code)),e.speedBonus},getBasicFood:function(){var e=this;if(e.snakeFood)return e.snakeFood;var t=o(s.eatables.basicFood.limits,s.eatables.basicFood.size),n=t.x,r=t.y;return e.snakeFood=i(e.arena,n,r,s.eatables.basicFood.code),e.snakeFood},getSnakeBonusFood:function(){var e=this;return e.snakeBonusFood||(e.snakeBonusFood=i(e.arena,-10,-10,s.eatables.bonusFood.code)),e.snakeBonusFood},start:function(){var e=this;try{e.getSnake().startSnake();var t=e.getBasicFood();setTimeout(1e3*s.eatables.basicFood.startAfter,t),e.getSnakeBonusFood().startInterval(),e.getSpeedBonusFood().startInterval(),e.setButtonListeners()}catch(t){throw e.showModal({modalConfig:{texts:c.START_GAME,btn1:{show:!1},btn2:{label:"ok"}}}),t}},growSnake:function(e){e&&e.growSnakeIfConsumed&&this.snake&&this.getSnake().grow(e.growSnakeByLength)},pause:function(){var t=this;e.getWindow().clearInterval(t.getSnake().intervalId),e.getWindow().clearInterval(t.getSnakeBonusFood().intervalId),E.pauseButton.setAttribute("disabled","true"),E.playButton.hasAttribute("disabled")&&E.playButton.removeAttribute("disabled"),t.state=s.game.state.paused,e.LOGGER.log("game paused")},resume:function(){var t=this;t.getSnake().startSnake(),t.getSnakeBonusFood().startInterval(),E.playButton.setAttribute("disabled","true"),E.pauseButton.hasAttribute("disabled")&&E.pauseButton.removeAttribute("disabled"),t.state=s.game.state.playing,e.LOGGER.log("game resumed")},stop:function(){var t=this;t.state=s.game.state.stopped,[t.getSnake().intervalId,t.getSnakeBonusFood().intervalId,t.getSpeedBonusFood().intervalId].forEach(e.getWindow().clearInterval),[t.getSnake().intervalId,v].forEach(e.getWindow().clearTimeout),t.snake=null,t.snakeFood=null,t.snakeBonusFood=null,t.speedBonus=null,E.pauseButton.setAttribute("disabled",!0),E.playButton.setAttribute("disabled",!0),t.showModal({modalConfig:{texts:[c.GAME_OVER,"You Scored "+t.getScore()+" points"],btn1:{label:"quit",clickHandler:e.getWindow().close.bind(e.getWindow())},btn2:{label:"restart",clickHandler:e.getWindow().location.reload.bind(e.getWindow().location)}}})},manageInactivity:function(){var t=this;void 0!==v&&e.getWindow().clearTimeout(v),v=setTimeout((function(){t.showModal({pauseGame:!0,modalConfig:{texts:[c.INACTIVITY_TIMEOUT,c.Q_CONTINUE],btn1:{clickHandler:t.stop.bind(t)},btn2:{clickHandler:t.resume.bind(t)}}})}),1e3*Math.floor(s.game.inactivityTimeout))},handleSnakeDirectionChange:function(t){var n=this;-1!==s.supportedKeys.indexOf(t)&&n.getSnake().currentDirection!=t&&t!=s.keyConfig[String(n.getSnake().currentDirection)].reverse&&(n.snakeDirection=t,n.getSnake().currentDirection=n.snakeDirection,e.getDirectionCommands().add({id:Date.now(),direction:t,position:n.getSnake().head.getCenter()}),n.manageInactivity())},setButtonListeners:function(){e.getWindow().addEventListener("unload",this.stop),e.getDocument().addEventListener("keydown",(function(t){t.preventDefault(),-1!==s.supportedKeys.indexOf(t.keyCode)&&e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:t.keyCode})}))},getScore:function(){return parseInt(E.scoreBoard.innerHTML)},updateScore:function(t){var n=parseInt(E.scoreBoard.innerHTML)+t;E.scoreBoard.innerHTML=n,n>0&&n%s.game.scoreCheckpointMultipleOf==0&&e.getGameEvents().emit("SCORE_CHECKPOINT",n/s.game.scoreCheckpointMultipleOf)},increaseSnakeSpeed:function(){var t=this;e.getWindow().clearInterval(this.getSnake().intervalId),this.getSnake().startSnake(s.snake.turboSpeed),setTimeout((function(){e.getWindow().clearInterval(t.getSnake().intervalId),t.getSnake().startSnake(s.snake.speed)}),1e3*s.eatables.speedBonus.speedDuration)},processScoreCheckpoint:function(t){e.LOGGER.log("checkpoint ".concat(t," reached"))},showGameInfo:function(){this.showModal({pauseGame:!0,modalConfig:{elementIds:[s.game.legendContainerId],btn1:{show:!1},btn2:{label:"ok",clickHandler:this.resume.bind(this)}}})},showModal:function(e){var t=e.pauseGame,n=void 0!==t&&t,r=e.modalConfig;n&&this.pause(),l.show(r)}}}}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.onload=function(){!function(){var e,n,o,a,s,u=t().onWindowLoad,c="arena-section",d="play-snake-arena",l={DEFAULT:"Sorry.",SETUP_GAME:"Failed to setup",START_GAME:"Unable To Start The Game",INACTIVITY_TIMEOUT:"It seems you are not playing",GAME_OVER:"Game Over",Q_CONTINUE:"Continue?"},g=(s={x:(a={x:(n=(e=u({arenaId:d,arenaContainerId:c})).ARENA_WIDTH)-2,y:(o=e.ARENA_HEIGHT)-2}).x-28,y:a.y-28},{id:d,arenaContainerId:c,width:n,height:o,borderColor:"black",borderWidth:1,limits:a,supportedKeys:[37,38,39,40],arena:{center:{x:Math.floor(n/2),y:Math.floor(o/2)}},directionMap:{37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},keyConfig:{37:{reverse:39},38:{reverse:40},39:{reverse:37},40:{reverse:38}},game:{legendContainerId:"legend-container",infoContainerId:"game-info",inactivityTimeout:300,state:{paused:0,stopped:1,playing:2},scoreBoard:{id:"score"},scoreCheckpointMultipleOf:50},pauseButton:{id:"pause-play-snake"},resumeButton:{id:"resume-play-snake"},quitButton:{id:"quit-play-snake"},snake:{id:"the-snake",elemType:"circle",width:14,color:"black",length:1,speed:12,step:1,turboSpeed:3},eatables:{basicFood:{id:"the-snake-food",color:"#aba99f",description:"Basic food",showInLegend:!0,points:5,appearDuration:null,startAfter:0,elemType:"circle",size:7,limits:s,isIntervalBased:!1,code:"basicFood",growSnakeIfConsumed:!0,growSnakeByLength:1},bonusFood:{id:"the-snake-bonus-food",color:"#d12308",description:"Bonus point",showInLegend:!0,points:10,appearDuration:10,startAfter:30,elemType:"circle",size:7,limits:s,isIntervalBased:!0,code:"bonusFood",growSnakeIfConsumed:!1,growSnakeByLength:2},speedBonus:{id:"the-speed-bonus",color:"#ffe205",description:"Turbo boost",showInLegend:!0,points:0,appearDuration:10,startAfter:30,elemType:"circle",size:7,speedDuration:10,limits:s,isIntervalBased:!0,code:"speedBonus",growSnakeIfConsumed:!1,growSnakeByLength:0}}});Object.freeze(g);var f,p,h,y,m={},v={RENDER_UNIT:"px",getSvgNamespace:function(){return"http://www.w3.org/2000/svg"},getWindow:function(){return window},getDocument:function(){return this.getWindow().document},getDocumentBody:function(){return this.getDocument().body},getConfig:function(){return g},getGame:function(){return f},getDirectionCommands:function(){return p},getSnakeDirectionMap:function(){return m},pixelify:function(e){return String(e).trim().concat(this.RENDER_UNIT)},getStyleString:function(e){return Object.keys(e||{}).reduce((function(t,n){if(!n||!String(n).trim().length)return t;n=String(n).trim();var r=e[n];return String(r).trim().length?(r=String(r).trim(),t.concat(" ".concat(n,": ").concat(r,";"))):t}),"")},createHTMLElement:function(e){var t=e.elementType,n=e.innerHTML,r=e.attributes,o=void 0===r?{}:r,a=e.eventListeners,s=void 0===a?{}:a,u=e.elementNamespace,c=e.parent,d=e.beforeElement;c||(c=v.getDocumentBody());var l=u?this.getDocument().createElementNS(u,t):this.getDocument().createElement(t);return"object"===i(o)&&Object.keys(o).forEach((function(e){return l.setAttribute(e,o[e])})),n&&(l.innerHTML=String(n)),d?c.insertBefore(l,d):c.appendChild(l),"object"===i(s)&&Object.keys(s).forEach((function(e){return l.addEventListener(e,s[e])})),l},getGameEvents:function(){return b},checkBoundaryPosition:function(e,t){var n=this.getConfig(),r=n.borderWidth,i=n.limits,o=this.getConfig().snake.width;switch(e){case 37:t.x<r&&(t.x=i.x-o);break;case 38:t.y<r&&(t.y=i.y-o);break;case 39:t.x+o>i.x&&(t.x=r);break;case 40:t.y+o>i.y&&(t.y=r)}return t},getDisplayMessages:function(){return l},intersectingOnXAxis:function(e,t){return t.x1<e.x1&&e.x1<t.x2||t.x1<e.x2&&e.x2<t.x2||e.x1<t.x1&&t.x1<e.x2||e.x1<t.x2&&t.x2<e.x2},intersectingOnYAxis:function(e,t){return t.y1<e.y1&&e.y1<t.y2||t.y1<e.y2&&e.y2<t.y2||e.y1<t.y1&&t.y1<e.y2||e.y1<t.y2&&t.y2<e.y2},LOGGER:{log:console.log,error:console.error,warn:console.warn}};h={id:Date.now(),direction:v.getConfig().supportedKeys[2],position:{x:v.getConfig().arena.center.x,y:v.getConfig().arena.center.y}},y=[],h&&y.push(h),p={add:function(e){var t=y[y.length-1];t&&t.position.x==e.position.x&&t.position.y==e.position.y?t.direction=e.direction:y.push(e)},getFirst:function(){return y[0]},remove:function(){y.shift()},clear:function(){y.splice(0,y.length)},hasCommands:function(){return y.length>0},getNextTurn:function(e){var t=v.getSnakeDirectionMap();if(void 0===t[e])return this.getFirst();var n=y.findIndex((function(n){return n.id===t[e]}));return n==y.length-1?void 0:y[n+1]}};var b=function(){var e,t={PAUSE_BUTTON_CLICKED:[function(){e.pause()}],RESUME_BUTTON_CLICKED:[function(){e.resume()}],STOP_GAME:[function(){return e.stop()}],EATABLE_CONSUMED:[function(e){e.hide()},function(e){"number"==typeof e.points&&n("UPDATE_SCORE",e.points)},function(t){e.growSnake(t)}],UPDATE_SCORE:[function(t){e.updateScore(t)}],USE_SPEED_BONUS:[function(){e.increaseSnakeSpeed()}],DEVOURED_SELF:[function(){return n("STOP_GAME")}],SNAKE_DIRECTION_CHANGE:[function(t){var n=t.direction;e.handleSnakeDirectionChange(parseInt(n))}],SHOW_GAME_INFO:[function(){return e.showGameInfo()}],SCORE_CHECKPOINT:[function(t){return e.processScoreCheckpoint(t)}]};function n(e,n){t.hasOwnProperty(e)?t[e].forEach((function(e){return e(n)})):console.warn("Invalid event triggered : ".concat(e))}return{init:function(t){return e=t},emit:n,listen:function(e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]},destruct:function(){return t={}}}}(),E=r(v).PlaySnake;f=E(),b.init(f),f.start()}()}})();