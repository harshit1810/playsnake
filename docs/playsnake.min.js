!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}!function(){if(window){var e,t=Math.floor(window.innerWidth)<500?Math.floor(window.innerWidth):500,n=Math.floor(window.innerHeight)<500?Math.floor(window.innerHeight):500,s="Unable To Start The Game",l=function(){var e,t={PAUSE_BUTTON_CLICKED:[function(){e.pause()}],RESUME_BUTTON_CLICKED:[function(){e.resume()}],EATABLE_CONSUMED:[function(e){e.hide(),"number"==typeof e.points&&n("UPDATE_SCORE",e.points)}],UPDATE_SCORE:[function(t){e.updateScore(t)}],USE_SPEED_BONUS:[function(){e.increaseSnakeSpeed()}],DEVOURED_SELF:[function(){e.stop()}],SNAKE_DIRECTION_CHANGE:[function(t){var n=t.direction;e.handleSnakeDirectionChange(parseInt(n))}]};function n(e,n){t.hasOwnProperty(e)?t[e].forEach((function(e){return e(n)})):console.warn("Invalid event triggered : ".concat(e))}return{init:function(t){e=t},emit:n,listen:function(e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]},destruct:function(){t={}}}}(),h={x:t-1,y:n-1},f={id:"play-snake-arena",width:t,height:n,borderColor:"black",borderWidth:1,limits:h,supportedKeys:[37,38,39,40],arena:{center:{x:Math.floor(t/2),y:Math.floor(n/2)}},directionMap:{37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},keyConfig:{37:{reverse:39},38:{reverse:40},39:{reverse:37},40:{reverse:38}},pauseButton:{id:"pause-play-snake",text:"Pause",order:"0"},resumeButton:{id:"resume-play-snake",text:"Resume",order:"1"},snake:{id:"the-snake",elemType:"rect",width:15,color:"black",length:1,speed:20,step:1},eatables:{basicFood:{id:"the-snake-food",color:"#aba99f",description:"Basic food",showInLegend:!0,points:5,appearDuration:null,startAfter:0,elemType:"circle",size:5,limits:{x:h.x-15,y:h.y-15}},bonusFood:{id:"the-snake-bonus-food",color:"#d12308",description:"Bonus point",showInLegend:!0,points:10,appearDuration:10,startAfter:30,elemType:"circle",size:15},speedBonus:{id:"the-speed-bonus",color:"#ffe205",description:"Extra speed",showInLegend:!0,points:0,appearDuration:10,startAfter:30,elemType:"circle",size:5,speedDuration:10}}},g=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=a(n);function n(){return c(this,n),t.call(this,"nextXY")}return d(n,[{key:"notify",value:function(e){if(r(u(n.prototype),"notify",this).call(this),e){var t=y.getSnakeFood();y.getSnake().grow(t.drop.bind(t))}}}]),n}(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c(this,e),this.observers=n,this.topic=t}return d(e,[{key:"addObserver",value:function(e){e&&e.element&&e.element.id&&this.observers.push(e)}},{key:"removeObserver",value:function(e){this.observers.splice(this.observers.findIndex((function(t){return t.element.id===e.element.id})),1)}},{key:"notify",value:function(){var e=this;this.observers.forEach((function(t){t[e.topic]()}))}}]),e}())),p={},y={RENDER_UNIT:"px",getSvgNamespace:function(){return"http://www.w3.org/2000/svg"},getWindow:function(){return window},getDocument:function(){return this.getWindow().document},getDocumentBody:function(){return this.getDocument().body},showAlert:function(e){this.getWindow().alert(e)},getArena:function(){return m},getArenaConfig:function(){return f},getGame:function(){return e},getSnake:function(){return this.getGame().getSnake()},getSnakeFood:function(){return this.getGame().getSnakeFood()},getSnakeBonusFood:function(){return this.getGame().getSnakeBonusFood()},getSpeedBonus:function(){return this.getGame().getSpeedBonusFood()},getDirectionCommands:function(){return A},getSnakeDirectionMap:function(){return p},pixelify:function(e){return String(e).trim().concat(this.RENDER_UNIT)},getPositionUpdater:function(){return g},getStyleString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){if(!n||!String(n).trim().length)return t;n=String(n).trim();var i=e[n];return String(i).trim().length?(i=String(i).trim(),t.concat(" ".concat(n,": ").concat(i,";"))):t}),"")},createHTMLElement:function(e){var t=e.elementType,n=e.innerHTML,r=e.attributes,o=void 0===r?{}:r,a=e.eventListeners,s=void 0===a?{}:a,u=e.elementNamespace,c=e.parent,l=e.beforeElement;c||(c=y.getDocumentBody());var d=u?this.getDocument().createElementNS(u,t):this.getDocument().createElement(t);return"object"===i(o)&&Object.keys(o).forEach((function(e){return d.setAttribute(e,o[e])})),n&&(d.innerHTML=String(n)),l?c.insertBefore(d,l):c.appendChild(d),"object"===i(s)&&Object.keys(s).forEach((function(e){return d.addEventListener(e,s[e])})),d},getGameEvents:function(){return l},checkBoundaryPosition:function(e,t){var n=this.getArenaConfig(),i=n.borderWidth,r=n.limits,o=this.getArenaConfig().snake.width;switch(e){case 37:t.x<i&&(t.x=r.x-o);break;case 38:t.y<i&&(t.y=r.y-o);break;case 39:t.x+o>r.x&&(t.x=i);break;case 40:t.y+o>r.y&&(t.y=i)}return t},LOGGER:{log:console.log,error:console.error,warn:console.warn}},v=function(e){var t,n,i,r={display:"flex","flex-direction":"column"},o={display:"flex","flex-direction":"row"},a={"text-transform":"capitalize"},s=Object.keys(e.getArenaConfig().directionMap).reduce((function(t,n){return t[e.getArenaConfig().directionMap[n]]=n,t}),{UP:null,DOWN:null,RIGHT:null,LEFT:null});e.getDocumentBody().style.fontFamily="Candara";try{var u=e.createHTMLElement({elementType:"div",attributes:{style:e.getStyleString(Object.assign({},o,{"flex-wrap":"wrap","justify-content":"flex-start",width:e.pixelify(e.getArenaConfig().width),padding:"1% 0%"}))}}),c=e.getStyleString({padding:"2% 2%","border-radius":e.pixelify(5),flex:"0 1 20%","text-align":"center","align-self":"flex-end"}),l=((i=e.createHTMLElement({elementType:"button",parent:u,innerHTML:e.getArenaConfig().pauseButton.text,attributes:{id:e.getArenaConfig().pauseButton.id,style:"".concat(c," order: ").concat(e.getArenaConfig().pauseButton.order)}})).addEventListener("click",(function(){e.getGameEvents().emit("PAUSE_BUTTON_CLICKED")})),i),d=function(){var t=e.createHTMLElement({elementType:"button",parent:u,innerHTML:e.getArenaConfig().resumeButton.text,attributes:{id:e.getArenaConfig().resumeButton.id,style:c+" "+e.getStyleString({"margin-left":"2%",order:e.getArenaConfig().resumeButton.order})},eventListeners:{click:e.getArenaConfig().resumeButton.clickHandler}});return t.addEventListener("click",(function(){e.getGameEvents().emit("RESUME_BUTTON_CLICKED")})),t}(),h=((n=e.createHTMLElement({elementType:"div",attributes:{id:"arena-container",style:e.getStyleString(Object.assign({},o,{"flex-wrap":"wrap"}))}})).addEventListener("touchstart",(function(e){if(e.preventDefault(),!(e.touches&&e.touches.length>1)){var n={};e.targetTouches&&(n.x=e.targetTouches[0].clientX,n.y=e.targetTouches[0].clientY),t=n}}),!0),n.addEventListener("touchmove",(function(e){e.preventDefault()}),!0),n.addEventListener("touchend",(function(n){n.preventDefault();var i=[parseInt(t.x),parseInt(t.y)],r=i[0],o=i[1];t=null;var a=n.changedTouches[0],u=[parseInt(a.clientX),parseInt(a.clientY)],c=u[0],l=u[1];if(r!==c||o!==l){var d=c-r,h=l-o;if(Math.abs(d)!==Math.abs(h))return 0===d?h>0?void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.DOWN}):void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.UP}):0===h?d>0?void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.RIGHT}):void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.LEFT}):void(d>0&&Math.abs(d)>Math.abs(h)?e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.RIGHT}):d<0&&Math.abs(d)>Math.abs(h)?e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.LEFT}):h>0&&Math.abs(h)>Math.abs(d)?e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.DOWN}):h<0&&Math.abs(h)>Math.abs(d)&&e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.UP}))}}),!0),n.addEventListener("touchcancel",(function(e){e.preventDefault(),t=null}),!0),n),f=e.createHTMLElement({elementNamespace:e.getSvgNamespace(),elementType:"svg",attributes:{id:e.getArenaConfig().id,height:e.getArenaConfig().height,width:e.getArenaConfig().width,style:"border: "+e.pixelify(e.getArenaConfig().borderWidth)+" solid "+e.getArenaConfig().borderColor},parent:h});!function(){var t=e.createHTMLElement({elementType:"div",parent:h,attributes:{id:"legend-container",style:e.getStyleString(Object.assign({},r,{padding:"".concat(e.pixelify(2)," ").concat(e.pixelify(2)),"justify-content":"flex-start"}))}});try{var n=e.getArenaConfig().eatables,i=void 0===n?{}:n;Object.keys(i).forEach((function(n){var r=i[n],s=r.description,u=r.showInLegend,c=r.color,l=void 0===c?"white":c;if(u&&s){var d=e.createHTMLElement({parent:t,elementType:"div",attributes:{style:e.getStyleString(Object.assign({},o,{"margin-bottom":e.pixelify(5),"align-items":"center"}))}});e.createHTMLElement({parent:d,elementType:"div",attributes:{style:e.getStyleString({height:e.pixelify(10),width:e.pixelify(10),"background-color":l,"border-radius":e.pixelify(5)})}}),e.createHTMLElement({parent:d,elementType:"span",innerHTML:s,attributes:{style:e.getStyleString(Object.assign({},a,{padding:"".concat(e.pixelify(0)," ").concat(e.pixelify(2))}))}})}}))}catch(t){e.LOGGER.warn("Failed while drawing legend: ".concat(t))}}();var g=e.createHTMLElement({elementType:"div",innerHTML:"Your Score: "});return{SNAKE_ARENA:f,PLAY_BUTTON:d,PAUSE_BUTTON:l,SCORE_BOARD:e.createHTMLElement({elementType:"span",parent:g,attributes:{id:"score",style:e.getStyleString({"font-weight":"bold"})},innerHTML:"0"})}}catch(t){throw e.LOGGER.error("Failed to setup the page: ".concat(t)),t}}(y),m=v.SNAKE_ARENA,b=v.PLAY_BUTTON,E=v.PAUSE_BUTTON,S=v.SCORE_BOARD;if(!m)return y.showAlert(s);var k,x,A=(k={id:Date.now(),direction:y.getArenaConfig().supportedKeys[2],position:{x:y.getArenaConfig().arena.center.x,y:y.getArenaConfig().arena.center.y}},x=[],k&&x.push(k),{add:function(e){var t=x[x.length-1];t&&t.position.x==e.position.x&&t.position.y==e.position.y?t.direction=e.direction:x.push(e)},getFirst:function(){return x[0]},remove:function(){x.shift()},clear:function(){x.splice(0,x.length)},hasCommands:function(){return x.length>0},getNextTurn:function(e){var t=y.getSnakeDirectionMap();if(void 0===t[e])return this.getFirst();var n=x.findIndex((function(n){return n.id===t[e]}));return n==x.length-1?void 0:x[n+1]}}),T=function(e){var t=e.getArenaConfig(),n=t.snake.width;function i(t,i){var r,o;do{var a=[Math.floor(Math.random()*(t.x-i))+e.getArenaConfig().borderWidth+1,Math.floor(Math.random()*(t.y-i))+e.getArenaConfig().borderWidth+1];r=a[0],o=a[1]}while(r%n!=0&&o%n!=0);return{x:r+2,y:o+2}}return{getNextEatablePosition:i,createEatableItem:function(n,r,o,a){if(!t.eatables[a])return e.LOGGER.warn("item ".concat(a," is not configured"));var s,u=t.eatables[a],c=u.id,l=u.limits,d=u.elemType,h=u.color,f=u.size,g=u.isIntervalBased,p=u.startAfter,y=u.points,v=u.appearDuration,m=e.createHTMLElement({elementType:d,elementNamespace:e.getSvgNamespace(),attributes:{id:c,cx:r,cy:o,r:f,fill:h},parent:e.getArena(),beforeElement:e.getSnake().head.element}),b=r+(f-1),E=o+(f-1);return{get isIntervalBased(){return g},get element(){return m},get arena(){return n},get limits(){return l},get intervalId(){return s},set intervalId(e){s=e},get startAfter(){return p},get size(){return f},get x2(){return b},set x2(e){b=e},get y2(){return E},set y2(e){E=e},get points(){return parseInt(y)},get x(){return parseInt(this.element.getAttribute("cx"))},set x(e){this.element.setAttribute("cx",Math.floor(e))},get y(){return parseInt(this.element.getAttribute("cy"))},set y(e){this.element.setAttribute("cy",Math.floor(e))},get appearDuration(){return v},startInterval:function(){if(this.isIntervalBased)return this.intervalId=setInterval(this.drop.bind(this),1e3*this.startAfter),this.intervalId},drop:function(){var e=i(this.limits,this.size),t=e.x,n=e.y;this.x=t,this.y=n,"number"==typeof this.appearDuration&&setTimeout(this.hide.bind(this),1e3*this.appearDuration)},hide:function(){this.x=-10,this.y=-10}}}}}(y),w=T.createEatableItem,_=T.getNextEatablePosition,C=function(e){var t=e.getArenaConfig(),n=t.snake,i=n.elemType,r=n.color,o=n.width,a=n.step,s=n.id,u=t.eatables.bonusFood.size,c=t.directionMap;function l(t,n,r,u,c,l){var d="".concat(s,"-part").concat(c),h=u,f=e.createHTMLElement({elementNamespace:e.getSvgNamespace(),elementType:i,attributes:{id:d,tabIndex:c,x:n,y:r,rx:o,ry:o,fill:l,width:e.pixelify(o),height:e.pixelify(o)},parent:t}),g=null,p=null;return{id:d,element:f,color:l,get direction(){return h},set direction(e){h=e},get next(){return g},get prev(){return p},set next(e){g=e},set prev(e){p=e},isSnakeHead:function(){return d===s},get x(){return parseInt(f.getAttribute("x"))},set x(e){f.setAttribute("x",Math.floor(e))},get y(){return parseInt(f.getAttribute("y"))},set y(e){f.setAttribute("y",Math.floor(e))},get x2(){return this.x+(o-1)},get y2(){return this.y+(o-1)},isTail:function(){return d===e.getSnake().tail.id},nextXY:function(){var t={x:this.x,y:this.y};switch(this.direction){case 37:t.x-=a;break;case 38:t.y-=a;break;case 39:t.x+=a;break;case 40:t.y+=a}t=e.checkBoundaryPosition(this.direction,t),this.x=t.x,this.y=t.y;var n=e.getDirectionCommands();if(n.hasCommands()){var i=n.getNextTurn(d);i&&i.position.x==this.x&&i.position.y==this.y&&(this.direction=i.direction,e.getSnakeDirectionMap()[d]=i.id,this.isTail()&&n.remove())}}}}return{Snake:function(t,n,i,s,d){var h,f=1,g=r,p=s,y=l(t,n,i,p,f,g),v=y;return{get arena(){return t},set arena(e){t=e},get length(){return f},set length(e){return f=e},get head(){return y},set head(e){return y=e},get tail(){return v},set tail(e){return v=e},get intervalId(){return h},set intervalId(e){h=e},get currentDirection(){return p},set currentDirection(e){p=e},get speed(){return d},set speed(e){d=e},get color(){return g},set color(e){g=e},UP:function(){this.move(0,-1*a)},DOWN:function(){this.move(0,a)},RIGHT:function(){this.move(a,0)},LEFT:function(){this.move(-1*a,0)},startSnake:function(e){var t=this;return e="number"==typeof e?e:this.speed,t.intervalId=setInterval((function(){t.changeDirection(t.currentDirection),t.start()}),e),t.intervalId},changeDirection:function(e){"number"==typeof e||this.currentDirection,this.head.direction=e},start:function(){this[c[this.head.direction]]()},getPositionOfNewPart:function(){var e=this.tail,t=e.x,n=e.y,i=e.direction,r=[Number(t),Number(n)],a=r[0],s=r[1];switch(i){case 37:a=t+o;break;case 38:s=n+o;break;case 39:a=t-o;break;case 40:s=n-o}return{x:a,y:s}},grow:function(t){var n=this.getPositionOfNewPart(),i=n.x,r=n.y,o=l(this.arena,i,r,this.tail.direction,this.length+1,this.tail.color);this.length+=1,this.tail.next=o,o.prev=this.tail,this.tail=o,e.getPositionUpdater().addObserver(this.tail),"function"==typeof t&&t()},changeColor:function(e){for(var t=this.head;null!==t.next;)n(t,e),t=t.next;function n(e,t){setTimeout((function(){e.color=t}),0)}},isEatingFood:function(){var t=e.getSnakeFood(),n=t.x,i=t.y;return this.head.x<n&&n<this.head.x2&&this.head.y<i&&i<this.head.y2},isEatingBonusFood:function(){var t=this.head,n=e.getSnakeBonusFood(),i=n.x,r=n.y,o=i+u-1,a=r-u-1,s=r+u-1;return i-u-1<t.x&&t.x<o&&a<t.y&&t.y<s},isEatingSpeedBonus:function(){var t=e.getSpeedBonus(),n=t.x,i=t.y;return this.head.x<n&&n<this.head.x2&&this.head.y<i&&i<this.head.y2},move:function(t,n){if(this.isDevouringSelf())e.getGameEvents().emit("DEVOURED_SELF");else{var i=this.head,r=e.checkBoundaryPosition(i.direction,{x:i.x+t,y:i.y+n}),o=r.x,a=r.y;i.x=o,i.y=a;var s=this.isEatingFood(),u=this.isEatingBonusFood(),c=this.isEatingSpeedBonus();s&&e.getGameEvents().emit("EATABLE_CONSUMED",e.getSnakeFood()),c&&(e.getGameEvents().emit("EATABLE_CONSUMED",e.getSpeedBonus()),e.getGameEvents().emit("USE_SPEED_BONUS",e.getSpeedBonus())),u&&e.getGameEvents().emit("EATABLE_CONSUMED",e.getSnakeBonusFood()),this.moveAllParts(s)}},moveAllParts:function(t){1===this.length&&e.getDirectionCommands().clear(),e.getPositionUpdater().notify(t)},isDevouringSelf:function(){for(var e=!1,t=this.head.next,n=this.head.direction;null!==t;){if(t.direction!==n||t.id===this.tail.id){switch(n){case 37:this.head.y===t.y&&this.head.x>t.x&&this.head.x<=t.x2&&(e=!0);break;case 38:this.head.x===t.x&&this.head.y>t.y&&this.head.y<=t.y2&&(e=!0);break;case 39:this.head.y===t.y&&this.head.x2<t.x2&&this.head.x2>=t.x&&(e=!0);break;case 40:this.head.x===t.x&&this.head.y2<t.y2&&this.head.y2>=t.y&&(e=!0)}if(e)break}t=t.next}return e}}}}}(y).Snake;e=new(function(){function e(t){c(this,e),this.intervals=[],this.timers=[],this._snake,this._snakeFood,this._snakeBonusFood,this.snakeDirection,this.arena=t,this.snakeSpeed=20,this._speedBonus}return d(e,[{key:"getSnake",value:function(){if(this._snake)return this._snake;var e=A.getFirst(),t=e.direction,n=e.position,i=n.x,r=n.y;return this.snakeDirection=t,this._snake=C(this.arena,i,r,this.snakeDirection,this.snakeSpeed),this._snake}},{key:"getSpeedBonusFood",value:function(){return this._speedBonus||(this._speedBonus=w(this.arena,-10,-10,"speedBonus")),this._speedBonus}},{key:"getSnakeFood",value:function(){if(this._snakeFood)return this._snakeFood;var e=_(y.getArenaConfig().eatables.basicFood.limits,y.getArenaConfig().eatables.basicFood.size),t=e.x,n=e.y;return this._snakeFood=w(this.arena,t,n,"basicFood"),this._snakeFood}},{key:"getSnakeBonusFood",value:function(){return this._snakeBonusFood||(this._snakeBonusFood=w(this.arena,-10,-10,"bonusFood")),this._snakeBonusFood}},{key:"start",value:function(){try{this.getSnake();var e=this.getSnakeFood();setTimeout(1e3*y.getArenaConfig().eatables.basicFood.startAfter,e);var t=this.getSnakeBonusFood();this.intervals.push(t.startInterval());var n=this.getSpeedBonusFood();this.intervals.push(n.startInterval()),this.setButtonListeners(),this.intervals.push(this.getSnake().startSnake())}catch(e){y.showAlert(s)}}},{key:"pause",value:function(){y.getWindow().clearInterval(this.getSnake().intervalId),y.getWindow().clearInterval(this.getSnakeBonusFood().intervalId),E.setAttribute("disabled","true"),b.hasAttribute("disabled")&&b.removeAttribute("disabled")}},{key:"resume",value:function(){this.getSnake().startSnake(),this.getSnakeBonusFood().startInterval(),b.setAttribute("disabled","true"),E.hasAttribute("disabled")&&E.removeAttribute("disabled")}},{key:"stop",value:function(){y.getWindow().clearInterval(this.getSnake().intervalId),y.getWindow().clearInterval(this.getSnakeBonusFood().intervalId),y.getWindow().clearInterval(this.getSpeedBonusFood().intervalId),this._snake=null,this._snakeFood=null,this._snakeBonusFood=null,this._speedBonus=null,this._speedBonus=null,y.getWindow().alert("GAME OVER\nYou Scored "+this.getScore()+" points.")}},{key:"handleSnakeDirectionChange",value:function(e){-1!==y.getArenaConfig().supportedKeys.indexOf(e)&&this.getSnake().currentDirection!=e&&e!=y.getArenaConfig().keyConfig[String(this.getSnake().currentDirection)].reverse&&(this.snakeDirection=e,this.getSnake().currentDirection=this.snakeDirection,A.add({id:Date.now(),direction:e,position:{x:this.getSnake().head.x,y:this.getSnake().head.y}}))}},{key:"setButtonListeners",value:function(){y.getWindow().addEventListener("unload",this.stop),y.getDocument().addEventListener("keydown",(function(e){-1!==y.getArenaConfig().supportedKeys.indexOf(e.keyCode)&&y.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:e.keyCode})}))}},{key:"getScore",value:function(){return parseInt(S.innerHTML)}},{key:"updateScore",value:function(e){return S.innerHTML=+S.innerHTML+e,parseInt(S.innerHTML)}},{key:"increaseSnakeSpeed",value:function(){var e=this;y.getWindow().clearInterval(this.getSnake().intervalId),this.intervals.push(this.getSnake().startSnake(this.getSnake().speed/4)),setTimeout((function(){y.getWindow().clearInterval(e.getSnake().intervalId),e.intervals.push(e.getSnake().startSnake())}),1e3*y.getArenaConfig().eatables.speedBonus.speedDuration)}}]),e}())(m),l.init(e),e.start()}}()}]);