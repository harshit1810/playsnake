!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e){var t=function(e){var t=e.getArenaConfig(),n=t.snake.width;function r(t,r){var i,o;do{var a=[Math.floor(Math.random()*(t.x-r))+e.getArenaConfig().borderWidth+1,Math.floor(Math.random()*(t.y-r))+e.getArenaConfig().borderWidth+1];i=a[0],o=a[1]}while(i%n!=0&&o%n!=0);return{x:i+2,y:o+2}}return{getNextEatablePosition:r,createEatableItem:function(n,i,o,a){if(!t.eatables[a])return e.LOGGER.warn("item ".concat(a," is not configured"));var s,u=t.eatables[a],c=u.id,l=u.limits,d=u.elemType,h=u.color,g=u.size,f=u.isIntervalBased,p=u.startAfter,y=u.points,v=u.appearDuration,m=e.createHTMLElement({elementType:d,elementNamespace:e.getSvgNamespace(),attributes:{id:c,cx:i,cy:o,r:g,fill:h},parent:e.getGame().arena,beforeElement:e.getGame().getSnake().head.element}),b=i+(g-1),E=o+(g-1);return{get isIntervalBased(){return f},get element(){return m},get arena(){return n},get limits(){return l},get intervalId(){return s},set intervalId(e){s=e},get startAfter(){return p},get size(){return g},get x2(){return b},set x2(e){b=e},get y2(){return E},set y2(e){E=e},get points(){return parseInt(y)},get x(){return parseInt(this.element.getAttribute("cx"))},set x(e){this.element.setAttribute("cx",Math.floor(e))},get y(){return parseInt(this.element.getAttribute("cy"))},set y(e){this.element.setAttribute("cy",Math.floor(e))},get appearDuration(){return v},startInterval:function(){if(this.isIntervalBased)return this.intervalId=setInterval(this.drop.bind(this),1e3*this.startAfter),this.intervalId},drop:function(){var e=r(this.limits,this.size),t=e.x,n=e.y;this.x=t,this.y=n,"number"==typeof this.appearDuration&&setTimeout(this.hide.bind(this),1e3*this.appearDuration)},hide:function(){this.x=-10,this.y=-10}}}}}(e),n=t.createEatableItem,i=t.getNextEatablePosition,o=function(e){var t=e.getArenaConfig(),n=t.snake,r=n.elemType,i=n.color,o=n.width,a=n.step,s=n.id,u=t.eatables.bonusFood.size,c=t.directionMap;function l(t,n,i,u,c,l){var d="".concat(s,"-part").concat(c),h=u,g=e.createHTMLElement({elementNamespace:e.getSvgNamespace(),elementType:r,attributes:{id:d,tabIndex:c,x:n,y:i,rx:o,ry:o,fill:l,width:e.pixelify(o),height:e.pixelify(o)},parent:t}),f=null,p=null;return{id:d,element:g,color:l,get direction(){return h},set direction(e){h=e},get next(){return f},get prev(){return p},set next(e){f=e},set prev(e){p=e},isSnakeHead:function(){return d===s},get x(){return parseInt(g.getAttribute("x"))},set x(e){g.setAttribute("x",Math.floor(e))},get y(){return parseInt(g.getAttribute("y"))},set y(e){g.setAttribute("y",Math.floor(e))},get x2(){return this.x+(o-1)},get y2(){return this.y+(o-1)},isTail:function(){return d===e.getGame().getSnake().tail.id},nextXY:function(){var t={x:this.x,y:this.y};switch(this.direction){case 37:t.x-=a;break;case 38:t.y-=a;break;case 39:t.x+=a;break;case 40:t.y+=a}t=e.checkBoundaryPosition(this.direction,t),this.x=t.x,this.y=t.y;var n=e.getDirectionCommands();if(n.hasCommands()){var r=n.getNextTurn(d);r&&r.position.x==this.x&&r.position.y==this.y&&(this.direction=r.direction,e.getSnakeDirectionMap()[d]=r.id,this.isTail()&&n.remove())}}}}return{Snake:function(t,n,r,s,d){var h,g=1,f=i,p=s,y=l(t,n,r,p,g,f),v=y;return{get arena(){return t},set arena(e){t=e},get length(){return g},set length(e){return g=e},get head(){return y},set head(e){return y=e},get tail(){return v},set tail(e){return v=e},get intervalId(){return h},set intervalId(e){h=e},get currentDirection(){return p},set currentDirection(e){p=e},get speed(){return d},set speed(e){d=e},get color(){return f},set color(e){f=e},UP:function(){this.move(0,-1*a)},DOWN:function(){this.move(0,a)},RIGHT:function(){this.move(a,0)},LEFT:function(){this.move(-1*a,0)},startSnake:function(e){var t=this;return e="number"==typeof e?e:this.speed,t.intervalId=setInterval((function(){t.changeDirection(t.currentDirection),t.start()}),e),t.intervalId},changeDirection:function(e){"number"==typeof e||this.currentDirection,this.head.direction=e},start:function(){this[c[this.head.direction]]()},getPositionOfNewPart:function(){var e=this.tail,t=e.x,n=e.y,r=e.direction,i=[Number(t),Number(n)],a=i[0],s=i[1];switch(r){case 37:a=t+o;break;case 38:s=n+o;break;case 39:a=t-o;break;case 40:s=n-o}return{x:a,y:s}},grow:function(t){var n=this.getPositionOfNewPart(),r=n.x,i=n.y,o=l(this.arena,r,i,this.tail.direction,this.length+1,this.tail.color);this.length+=1,this.tail.next=o,o.prev=this.tail,this.tail=o,e.getPositionUpdater().addObserver(this.tail),"function"==typeof t&&t()},changeColor:function(e){for(var t=this.head;null!==t.next;)n(t,e),t=t.next;function n(e,t){setTimeout((function(){e.color=t}),0)}},isEatingFood:function(){var t=e.getGame().getSnakeFood(),n=t.x,r=t.y;return this.head.x<n&&n<this.head.x2&&this.head.y<r&&r<this.head.y2},isEatingBonusFood:function(){var t=this.head,n=e.getGame().getSnakeBonusFood(),r=n.x,i=n.y,o=r+u-1,a=i-u-1,s=i+u-1;return r-u-1<t.x&&t.x<o&&a<t.y&&t.y<s},isEatingSpeedBonus:function(){var t=e.getGame().getSpeedBonusFood(),n=t.x,r=t.y;return this.head.x<n&&n<this.head.x2&&this.head.y<r&&r<this.head.y2},move:function(t,n){if(this.isDevouringSelf())e.getGameEvents().emit("DEVOURED_SELF");else{var r=this.head,i=e.checkBoundaryPosition(r.direction,{x:r.x+t,y:r.y+n}),o=i.x,a=i.y;r.x=o,r.y=a;var s=this.isEatingFood(),u=this.isEatingBonusFood(),c=this.isEatingSpeedBonus();s&&e.getGameEvents().emit("EATABLE_CONSUMED",e.getGame().getSnakeFood()),c&&(e.getGameEvents().emit("EATABLE_CONSUMED",e.getGame().getSpeedBonusFood()),e.getGameEvents().emit("USE_SPEED_BONUS",e.getGame().getSpeedBonusFood())),u&&e.getGameEvents().emit("EATABLE_CONSUMED",e.getGame().getSnakeBonusFood()),this.moveAllParts(s)}},moveAllParts:function(t){1===this.length&&e.getDirectionCommands().clear(),e.getPositionUpdater().notify(t)},isDevouringSelf:function(){for(var e=!1,t=this.head.next,n=this.head.direction;null!==t;){if(t.direction!==n||t.id===this.tail.id){switch(n){case 37:this.head.y===t.y&&this.head.x>t.x&&this.head.x<=t.x2&&(e=!0);break;case 38:this.head.x===t.x&&this.head.y>t.y&&this.head.y<=t.y2&&(e=!0);break;case 39:this.head.y===t.y&&this.head.x2<t.x2&&this.head.x2>=t.x&&(e=!0);break;case 40:this.head.x===t.x&&this.head.y2<t.y2&&this.head.y2>=t.y&&(e=!0)}if(e)break}t=t.next}return e}}}}}(e).Snake;return{PlaySnake:function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e){var t,n,r,i={display:"flex","flex-direction":"column"},o={display:"flex","flex-direction":"row"},a={"text-transform":"capitalize"},s=Object.keys(e.getArenaConfig().directionMap).reduce((function(t,n){return t[e.getArenaConfig().directionMap[n]]=n,t}),{UP:null,DOWN:null,RIGHT:null,LEFT:null});e.getDocumentBody().style.fontFamily="Candara";try{var u=e.createHTMLElement({elementType:"div",attributes:{style:e.getStyleString(Object.assign({},o,{"flex-wrap":"wrap","justify-content":"flex-start",width:e.pixelify(e.getArenaConfig().width),padding:"1% 0%"}))}}),c=e.getStyleString({padding:"2% 2%","border-radius":e.pixelify(5),flex:"0 1 20%","text-align":"center","align-self":"flex-end"}),l=((r=e.createHTMLElement({elementType:"button",parent:u,innerHTML:e.getArenaConfig().pauseButton.text,attributes:{id:e.getArenaConfig().pauseButton.id,style:"".concat(c," order: ").concat(e.getArenaConfig().pauseButton.order)}})).addEventListener("click",(function(){e.getGameEvents().emit("PAUSE_BUTTON_CLICKED")})),r),d=function(){var t=e.createHTMLElement({elementType:"button",parent:u,innerHTML:e.getArenaConfig().resumeButton.text,attributes:{id:e.getArenaConfig().resumeButton.id,style:c+" "+e.getStyleString({"margin-left":"2%",order:e.getArenaConfig().resumeButton.order})},eventListeners:{click:e.getArenaConfig().resumeButton.clickHandler}});return t.addEventListener("click",(function(){e.getGameEvents().emit("RESUME_BUTTON_CLICKED")})),t}(),h=((n=e.createHTMLElement({elementType:"div",attributes:{id:"arena-container",style:e.getStyleString(Object.assign({},o,{"flex-wrap":"wrap"}))}})).addEventListener("touchstart",(function(e){if(e.preventDefault(),!(e.touches&&e.touches.length>1)){var n={};e.targetTouches&&(n.x=e.targetTouches[0].clientX,n.y=e.targetTouches[0].clientY),t=n}}),!0),n.addEventListener("touchmove",(function(e){e.preventDefault()}),!0),n.addEventListener("touchend",(function(n){n.preventDefault();var r=[parseInt(t.x),parseInt(t.y)],i=r[0],o=r[1];t=null;var a=n.changedTouches[0],u=[parseInt(a.clientX),parseInt(a.clientY)],c=u[0],l=u[1];if(i!==c||o!==l){var d=c-i,h=l-o;if(Math.abs(d)!==Math.abs(h))return 0===d?h>0?void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.DOWN}):void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.UP}):0===h?d>0?void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.RIGHT}):void e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.LEFT}):void(d>0&&Math.abs(d)>Math.abs(h)?e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.RIGHT}):d<0&&Math.abs(d)>Math.abs(h)?e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.LEFT}):h>0&&Math.abs(h)>Math.abs(d)?e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.DOWN}):h<0&&Math.abs(h)>Math.abs(d)&&e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:s.UP}))}}),!0),n.addEventListener("touchcancel",(function(e){e.preventDefault(),t=null}),!0),n),g=e.createHTMLElement({elementNamespace:e.getSvgNamespace(),elementType:"svg",attributes:{id:e.getArenaConfig().id,height:e.getArenaConfig().height,width:e.getArenaConfig().width,style:"border: "+e.pixelify(e.getArenaConfig().borderWidth)+" solid "+e.getArenaConfig().borderColor},parent:h});!function(){var t=e.createHTMLElement({elementType:"div",parent:h,attributes:{id:"legend-container",style:e.getStyleString(Object.assign({},i,{padding:"".concat(e.pixelify(2)," ").concat(e.pixelify(2)),"justify-content":"flex-start"}))}});try{var n=e.getArenaConfig().eatables,r=void 0===n?{}:n;Object.keys(r).forEach((function(n){var i=r[n],s=i.description,u=i.showInLegend,c=i.color,l=void 0===c?"white":c;if(u&&s){var d=e.createHTMLElement({parent:t,elementType:"div",attributes:{style:e.getStyleString(Object.assign({},o,{"margin-bottom":e.pixelify(5),"align-items":"center"}))}});e.createHTMLElement({parent:d,elementType:"div",attributes:{style:e.getStyleString({height:e.pixelify(10),width:e.pixelify(10),"background-color":l,"border-radius":e.pixelify(5)})}}),e.createHTMLElement({parent:d,elementType:"span",innerHTML:s,attributes:{style:e.getStyleString(Object.assign({},a,{padding:"".concat(e.pixelify(0)," ").concat(e.pixelify(2))}))}})}}))}catch(t){e.LOGGER.warn("Failed while drawing legend: ".concat(t))}}();var f=e.createHTMLElement({elementType:"div",innerHTML:"Your Score: "});return{SNAKE_ARENA:g,PLAY_BUTTON:d,PAUSE_BUTTON:l,SCORE_BOARD:e.createHTMLElement({elementType:"span",parent:f,attributes:{id:"score",style:e.getStyleString({"font-weight":"bold"})},innerHTML:"0"})}}catch(t){throw e.LOGGER.error("Failed to setup the page: ".concat(t)),t}}(e),r=n.SNAKE_ARENA,i=n.PLAY_BUTTON,o=n.PAUSE_BUTTON,a=n.SCORE_BOARD;if(!r)throw e.showAlert(e.getErrorMessages().SETUP_GAME),new Error(e.getErrorMessages().SETUP_GAME);this.intervals=[],this.timers=[],this._snake,this._snakeFood,this._snakeBonusFood,this.snakeDirection,this.arena=r,this.snakeSpeed=20,this._speedBonus,this.gameControls={playButton:i,pauseButton:o,scoreBoard:a}}var a,s,u;return a=t,(s=[{key:"getSnake",value:function(){if(this._snake)return this._snake;var t=e.getDirectionCommands().getFirst(),n=t.direction,r=t.position,i=r.x,a=r.y;return this.snakeDirection=n,this._snake=o(this.arena,i,a,this.snakeDirection,this.snakeSpeed),this._snake}},{key:"getSpeedBonusFood",value:function(){return this._speedBonus||(this._speedBonus=n(this.arena,-10,-10,e.getArenaConfig().eatables.speedBonus.code)),this._speedBonus}},{key:"getSnakeFood",value:function(){if(this._snakeFood)return this._snakeFood;var t=i(e.getArenaConfig().eatables.basicFood.limits,e.getArenaConfig().eatables.basicFood.size),r=t.x,o=t.y;return this._snakeFood=n(this.arena,r,o,e.getArenaConfig().eatables.basicFood.code),this._snakeFood}},{key:"getSnakeBonusFood",value:function(){return this._snakeBonusFood||(this._snakeBonusFood=n(this.arena,-10,-10,e.getArenaConfig().eatables.bonusFood.code)),this._snakeBonusFood}},{key:"start",value:function(){try{this.getSnake();var t=this.getSnakeFood();setTimeout(1e3*e.getArenaConfig().eatables.basicFood.startAfter,t);var n=this.getSnakeBonusFood();this.intervals.push(n.startInterval());var r=this.getSpeedBonusFood();this.intervals.push(r.startInterval()),this.setButtonListeners(),this.intervals.push(this.getSnake().startSnake())}catch(t){e.showAlert(e.getErrorMessages().START_GAME)}}},{key:"pause",value:function(){e.getWindow().clearInterval(this.getSnake().intervalId),e.getWindow().clearInterval(this.getSnakeBonusFood().intervalId),this.gameControls.pauseButton.setAttribute("disabled","true"),this.gameControls.playButton.hasAttribute("disabled")&&this.gameControls.playButton.removeAttribute("disabled")}},{key:"resume",value:function(){this.getSnake().startSnake(),this.getSnakeBonusFood().startInterval(),this.gameControls.playButton.setAttribute("disabled","true"),this.gameControls.pauseButton.hasAttribute("disabled")&&this.gameControls.pauseButton.removeAttribute("disabled")}},{key:"stop",value:function(){e.getWindow().clearInterval(this.getSnake().intervalId),e.getWindow().clearInterval(this.getSnakeBonusFood().intervalId),e.getWindow().clearInterval(this.getSpeedBonusFood().intervalId),this._snake=null,this._snakeFood=null,this._snakeBonusFood=null,this._speedBonus=null,this._speedBonus=null,e.getWindow().alert("GAME OVER\nYou Scored "+this.getScore()+" points.")}},{key:"handleSnakeDirectionChange",value:function(t){-1!==e.getArenaConfig().supportedKeys.indexOf(t)&&this.getSnake().currentDirection!=t&&t!=e.getArenaConfig().keyConfig[String(this.getSnake().currentDirection)].reverse&&(this.snakeDirection=t,this.getSnake().currentDirection=this.snakeDirection,e.getDirectionCommands().add({id:Date.now(),direction:t,position:{x:this.getSnake().head.x,y:this.getSnake().head.y}}))}},{key:"setButtonListeners",value:function(){e.getWindow().addEventListener("unload",this.stop),e.getDocument().addEventListener("keydown",(function(t){-1!==e.getArenaConfig().supportedKeys.indexOf(t.keyCode)&&e.getGameEvents().emit("SNAKE_DIRECTION_CHANGE",{direction:t.keyCode})}))}},{key:"getScore",value:function(){return parseInt(this.gameControls.scoreBoard.innerHTML)}},{key:"updateScore",value:function(e){return this.gameControls.scoreBoard.innerHTML=parseInt(this.gameControls.scoreBoard.innerHTML)+e,parseInt(this.gameControls.scoreBoard.innerHTML)}},{key:"increaseSnakeSpeed",value:function(){var t=this;e.getWindow().clearInterval(this.getSnake().intervalId),this.intervals.push(this.getSnake().startSnake(this.getSnake().speed/4)),setTimeout((function(){e.getWindow().clearInterval(t.getSnake().intervalId),t.intervals.push(t.getSnake().startSnake())}),1e3*e.getArenaConfig().eatables.speedBonus.speedDuration)}}])&&r(a.prototype,s),u&&r(a,u),t}()}};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}!function(){if(window){var e,t,n,r,c=Math.floor(window.innerWidth)<500?Math.floor(window.innerWidth):500,h=Math.floor(window.innerHeight)<500?Math.floor(window.innerHeight):500,f={DEFAULT:"Sorry.",SETUP_GAME:"Failed to setup",START_GAME:"Unable To Start The Game"},p=function(){var e,t={PAUSE_BUTTON_CLICKED:[function(){e.pause()}],RESUME_BUTTON_CLICKED:[function(){e.resume()}],EATABLE_CONSUMED:[function(e){e.hide(),"number"==typeof e.points&&n("UPDATE_SCORE",e.points)}],UPDATE_SCORE:[function(t){e.updateScore(t)}],USE_SPEED_BONUS:[function(){e.increaseSnakeSpeed()}],DEVOURED_SELF:[function(){e.stop()}],SNAKE_DIRECTION_CHANGE:[function(t){var n=t.direction;e.handleSnakeDirectionChange(parseInt(n))}]};function n(e,n){t.hasOwnProperty(e)?t[e].forEach((function(e){return e(n)})):console.warn("Invalid event triggered : ".concat(e))}return{init:function(t){e=t},emit:n,listen:function(e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]},destruct:function(){t={}}}}(),y={x:c-1,y:h-1},v={id:"play-snake-arena",width:c,height:h,borderColor:"black",borderWidth:1,limits:y,supportedKeys:[37,38,39,40],arena:{center:{x:Math.floor(c/2),y:Math.floor(h/2)}},directionMap:{37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},keyConfig:{37:{reverse:39},38:{reverse:40},39:{reverse:37},40:{reverse:38}},pauseButton:{id:"pause-play-snake",text:"Pause",order:"0"},resumeButton:{id:"resume-play-snake",text:"Resume",order:"1"},snake:{id:"the-snake",elemType:"rect",width:15,color:"black",length:1,speed:20,step:1},eatables:{basicFood:{id:"the-snake-food",color:"#aba99f",description:"Basic food",showInLegend:!0,points:5,appearDuration:null,startAfter:0,elemType:"circle",size:5,limits:{x:y.x-15,y:y.y-15},isIntervalBased:!1,code:"basicFood"},bonusFood:{id:"the-snake-bonus-food",color:"#d12308",description:"Bonus point",showInLegend:!0,points:10,appearDuration:10,startAfter:30,elemType:"circle",size:15,limits:{x:y.x-30,y:y.y-30},isIntervalBased:!0,code:"bonusFood"},speedBonus:{id:"the-speed-bonus",color:"#ffe205",description:"Extra speed",showInLegend:!0,points:0,appearDuration:10,startAfter:30,elemType:"circle",size:5,speedDuration:10,limits:{x:y.x-15,y:y.y-15},isIntervalBased:!0,code:"speedBonus"}}},m=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(){return d(this,n),t.call(this,"nextXY")}return g(n,[{key:"notify",value:function(e){if(a(l(n.prototype),"notify",this).call(this),e){var t=E.getGame().getSnakeFood();E.getGame().getSnake().grow(t.drop.bind(t))}}}]),n}(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d(this,e),this.observers=n,this.topic=t}return g(e,[{key:"addObserver",value:function(e){e&&e.element&&e.element.id&&this.observers.push(e)}},{key:"removeObserver",value:function(e){this.observers.splice(this.observers.findIndex((function(t){return t.element.id===e.element.id})),1)}},{key:"notify",value:function(){var e=this;this.observers.forEach((function(t){t[e.topic]()}))}}]),e}())),b={},E={RENDER_UNIT:"px",getSvgNamespace:function(){return"http://www.w3.org/2000/svg"},getWindow:function(){return window},getDocument:function(){return this.getWindow().document},getDocumentBody:function(){return this.getDocument().body},showAlert:function(e){this.getWindow().alert(e)},getArenaConfig:function(){return v},getGame:function(){return e},getDirectionCommands:function(){return t},getSnakeDirectionMap:function(){return b},pixelify:function(e){return String(e).trim().concat(this.RENDER_UNIT)},getPositionUpdater:function(){return m},getStyleString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){if(!n||!String(n).trim().length)return t;n=String(n).trim();var r=e[n];return String(r).trim().length?(r=String(r).trim(),t.concat(" ".concat(n,": ").concat(r,";"))):t}),"")},createHTMLElement:function(e){var t=e.elementType,n=e.innerHTML,r=e.attributes,i=void 0===r?{}:r,a=e.eventListeners,s=void 0===a?{}:a,u=e.elementNamespace,c=e.parent,l=e.beforeElement;c||(c=E.getDocumentBody());var d=u?this.getDocument().createElementNS(u,t):this.getDocument().createElement(t);return"object"===o(i)&&Object.keys(i).forEach((function(e){return d.setAttribute(e,i[e])})),n&&(d.innerHTML=String(n)),l?c.insertBefore(d,l):c.appendChild(d),"object"===o(s)&&Object.keys(s).forEach((function(e){return d.addEventListener(e,s[e])})),d},getGameEvents:function(){return p},checkBoundaryPosition:function(e,t){var n=this.getArenaConfig(),r=n.borderWidth,i=n.limits,o=this.getArenaConfig().snake.width;switch(e){case 37:t.x<r&&(t.x=i.x-o);break;case 38:t.y<r&&(t.y=i.y-o);break;case 39:t.x+o>i.x&&(t.x=r);break;case 40:t.y+o>i.y&&(t.y=r)}return t},getErrorMessages:function(){return f},LOGGER:{log:console.log,error:console.error,warn:console.warn}};n={id:Date.now(),direction:E.getArenaConfig().supportedKeys[2],position:{x:E.getArenaConfig().arena.center.x,y:E.getArenaConfig().arena.center.y}},r=[],n&&r.push(n),t={add:function(e){var t=r[r.length-1];t&&t.position.x==e.position.x&&t.position.y==e.position.y?t.direction=e.direction:r.push(e)},getFirst:function(){return r[0]},remove:function(){r.shift()},clear:function(){r.splice(0,r.length)},hasCommands:function(){return r.length>0},getNextTurn:function(e){var t=E.getSnakeDirectionMap();if(void 0===t[e])return this.getFirst();var n=r.findIndex((function(n){return n.id===t[e]}));return n==r.length-1?void 0:r[n+1]}};var S=i(E).PlaySnake;e=new S,p.init(e),e.start()}}()}]);